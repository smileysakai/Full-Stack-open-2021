(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t(16),r=t.n(a),u=(t(22),t(3)),o=t(17),i=t(5),s=t.n(i),d="/api/persons",l={getPersons:function(){return s.a.get(d).then((function(e){return e.data}))},addPerson:function(e){return s.a.post(d,e).then((function(e){return e.data}))},deletePerson:function(e){return s.a.delete("".concat(d,"/").concat(e))},updatePerson:function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))}},j=t(0),b=function(e){return Object(j.jsxs)("div",{children:["filter shown with ",Object(j.jsx)("input",{value:e.filterName,onChange:e.handleFilter})]})},h=function(e){return Object(j.jsxs)("form",{onSubmit:e.addName,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=Object(o.a)(e.personsToShow);return Object(j.jsx)("div",{children:n.map((function(n){return Object(j.jsxs)("div",{children:[" ",n.name," ",n.number," ",Object(j.jsx)("button",{onClick:function(){return e.handleDelete([n.id,n.name])},children:"delete"})]},n.id)}))})},m=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),o=Object(u.a)(r,2),i=o[0],s=o[1],d=Object(c.useState)(""),m=Object(u.a)(d,2),O=m[0],p=m[1],v=Object(c.useState)(!0),x=Object(u.a)(v,2),g=x[0],w=x[1],N=Object(c.useState)(""),C=Object(u.a)(N,2),S=C[0],P=C[1],k=Object(c.useState)(null),y=Object(u.a)(k,2),T=y[0],D=y[1],U=Object(c.useState)(null),E=Object(u.a)(U,2),F=E[0],I=E[1];Object(c.useEffect)((function(){l.getPersons().then((function(e){return a(e)}))}),[]);var J=g?t:t.filter((function(e){return e.name.toUpperCase().includes(S.toUpperCase())})),A=function(e){var n=e.message,t=e.type;return null===n?null:"success"===t?Object(j.jsx)("div",{className:"success",children:n}):Object(j.jsx)("div",{className:"error",children:n})};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(A,{message:T,type:"success"}),Object(j.jsx)(A,{message:F,type:"error"}),Object(j.jsx)(b,{filterName:S,handleFilter:function(e){w(!1),P(e.target.value),""===e.target.value&&w(!0)}}),Object(j.jsx)("h2",{children:"add a new"}),Object(j.jsx)(h,{addName:function(e){e.preventDefault();var n={name:i,number:O},c=t.filter((function(e){return e.name===i})),r=Object(u.a)(c,1)[0];r?window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))&&(l.updatePerson(r.id,n).then((function(e){a(t.map((function(n){return n.id!==r.id?n:e}))),D("Updated ".concat(i)),setTimeout((function(){D(null)}),3e3)})).catch((function(e){I("Information of ".concat(i," has already been removed from the server")),setTimeout((function(){I(null)}),3e3),a(t.filter((function(e){return e.id!==r.id})))})),s(""),p("")):l.addPerson(n).then((function(e){a(t.concat(e)),D("Added ".concat(i)),setTimeout((function(){D(null)}),3e3),s(""),p("")}))},newName:i,handleNameChange:function(e){s(e.target.value)},newNumber:O,handleNumberChange:function(e){p(e.target.value)}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(f,{personsToShow:J,handleDelete:function(e){var n=Object(u.a)(e,2),c=n[0],r=n[1];window.confirm("Delete ".concat(r," ?"))&&(l.deletePerson(c),a(t.filter((function(e){return e.id!==c}))))}})]})};r.a.render(Object(j.jsx)(m,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.ced3cad0.chunk.js.map